<div class="Layout">
  <div class="Content">
    <div class="Box Box--first">
      <h1>Perfume.js</h1>
      <p>A JavaScript library for <b>measuring</b> Short and Long Script, <b>First Contentful Paint</b> (<a href="https://developers.google.com/web/updates/2017/06/user-centric-performance-metrics#first_paint_and_first_contentful_paint" target="_blank">FCP</a>), <b>Time to Interactive</b> (<a href="https://developers.google.com/web/tools/lighthouse/audits/time-to-interactive" target="_blank">TTI</a>), <b>Component First Paint</b> (CFM), annotating them to the DevTools timeline and reporting the results to <b>Google Analytics</b>.</p>
      <a class="github-button" href="https://github.com/zizzamia/perfume.js" data-size="large" data-show-count="true" aria-label="Star zizzamia/perfume.js on GitHub">Star</a>
    </div>
    <div class="Box">
      <h2 class="Title" id="/user-centric-metrics/">
        User-centric performance metrics
      </h2>
      <p>When a user navigates to a web page, they're typically looking for visual feedback to reassure them that everything is going to work as expected.</p>
      <p>Is it happening? Is it useful? Is it usable? Is it delightful?<br />
      To understand when a page delivers this feedback to its users, we've defined several new metrics:</p>
      <ul>
        <li>First Contentful Paint (FCP)</li>
        <li>Time to Interactive (TTI)</li>
        <li>Component First Paint (CFP)</li>
      </ul>
      <p>Luckily, with the addition of a few new browser APIs, measuring these metrics on real devices is finally possible without a lot of hacks or workarounds that can make performance worse.</p>
      <p><b>Perfume</b> leverage these new APIs for measuring performance that matters! ⚡️ </p>
      <img src="{{ path }}assets/perf-metrics-load-timeline.png" />
    </div>

    <div class="Box">
      <h2 class="Title" id="/installing-and-imports/">Installing and Imports</h2>
      <p>NPM <a href="https://www.npmjs.com/package/perfume.js" target="_blank">https://www.npmjs.com/package/perfume.js</a></p>
      <app-gist [gistId]="'Zizzamia/6ab4c33d749ae74d240ebace2cf944f8'"></app-gist>
    </div>

    <div class="Box">
      <h2 class="Title" id="first-contentful-paint">First Contentful Paint (FCP)</h2>
      <p>This metric mark the point, immediately after navigation, when the browser renders pixels to the screen. This is important to the user because it answers the question: is it happening?</p>
      <p><b>FCP</b> marks the point when the browser renders the first bit of content from the DOM, which may be text, an image, SVG, or even a element.</p>
      <p class="Demo">
        Result: ⚡️ Perfume.js: First Contentful Paint {{ perfume.firstContentfulPaintDuration.toFixed(2) }} ms
      </p>
      <app-gist [gistId]="'Zizzamia/15e965213aa87a5588a6756fef612f45'"></app-gist>
    </div>

    <div class="Box">
      <h2 class="Title" id="/time-to-interactive/">Time to Interactive (TTI)</h2>
      <p>The metric marks the point at which your application is both visually rendered and capable of reliably responding to user input. An application could be unable to respond to user input for a couple of reasons:</p>
      <ul>
        <li>The JavaScript needed to make the components on the page work hasn't yet loaded;</li>
        <li>There are long tasks blocking the main thread.</li>
      </ul>
      <p>The <b>TTI</b> metric identifies the point at which the page's initial JavaScript is loaded and the main thread is idle (free of long tasks). See the <a href="https://docs.google.com/document/d/1GGiI9-7KeY3TPqS3YT271upUVimo-XiL5mwWorDUD4c/preview#" target="_blank">metric definition</a> for in-depth implementation details.</p>
      <p class="Demo">
        Result: ⚡️ Perfume.js: Time to interactive {{ perfume.timeToInteractiveDuration.toFixed(2) }} ms
      </p>
      <app-gist [gistId]="'Zizzamia/9c971fb35b898871953cc272924ce58d'"></app-gist>
    </div>

    <div class="Box">
      <h2 class="Title" id="/annotate-metrics/">Annotate metrics in the DevTools</h2>
      <p><b>Performance.mark</b> (<a href="https://developer.mozilla.org/en-US/docs/Web/API/User_Timing_API" target="_blank">User Timing API</a>) is used to create an application-defined peformance entry in the browser's performance entry buffer.</p>
      <p class="Demo">
        <button class="Button" 
        (click)="measureFibonacci()">Run Fibonacci</button>
        <span>Result: {{ logFibonacci }}</span>
      </p>
      <app-gist [gistId]="'Zizzamia/e680d4f2f9f2bf9ba15b13207264f7bc'"></app-gist>
      <img src="{{ path }}assets/performance-mark.png" />
    </div>

    <div class="Box" id="/component-first-paint/">
      <h2 class="Title">Component First Paint (CFP)</h2>
      <p>This metric mark the point, immediately after creating a <b>new component</b>, when the browser renders pixels to the screen.</p>
      <p class="Demo">
        <button type="button" class="Button"  #elBtn
        data-toggle="popover" title="Popover" 
        data-placement="top" data-content="And here's some amazing content."
        (click)="togglePopover(elBtn)">Click to toggle popover</button>
        <span>Result: {{ logTogglePopover }}</span>
      </p>
      <app-gist [gistId]="'Zizzamia/ee3ec5ab7bb04822ff7535d18c7d9e96'"></app-gist>
      <img src="{{ path }}assets/performance-cfp.png" />
    </div>

    <div class="Box">
      <h2 class="Title" id="/custom-logging/">Custom Logging</h2>
      <p>Save the duration and print it out exactly the way you want it.</p>
      <p class="Demo">
        <button class="Button" 
        (click)="customLogging()">Run custom logging</button>
        <span>Result: {{ logCustom }}</span>
      </p>
      <app-gist [gistId]="'Zizzamia/b16edc8b4052ac4186ebc62151de7dca'"></app-gist>
    </div>

    <div class="Box">
      <h2 class="Title" id="/google-analytics/">Google Analytics</h2>
      <p>To enable Perfume to send your measures to Google Analytics User timing, set the option <b>enable:true</b> and a custom <a href="https://developers.google.com/analytics/devguides/collection/analyticsjs/field-reference#timingVar" target="_blank">user timing variable</a> <b>timingVar:"name"</b>.</p>
      <app-gist [gistId]="'Zizzamia/221227bf333b0f6304a89fcd4f7038c4'"></app-gist>
      <img src="{{ path }}assets/performance-analytics.png" />
    </div>

    <div class="Box">
      <h2 class="Title" id="/copyright-and-license/">Copyright and license</h2>
      <p>Code and documentation copyright 2018 <a href="https://twitter.com/Zizzamia" target="_blank">Leonardo Zizzamia</a>. Code released under the <a href="https://github.com/Zizzamia/perfume.js/blob/master/LICENSE" target="_blank">MIT license</a>. Docs released under Creative Commons.</p>
    </div>
  </div>
  <div class="nav">
    <div class="nav-links">
      <a href="#/user-centric-metrics/" class="nav-section-title" 
      [class.active]="navSelected === navOptions.userCentric"
      (click)="activeNav(navOptions.userCentric)">User-centric metrics</a>
      <a href="#/installing-and-imports/" class="nav-section-title" 
      [class.active]="navSelected === navOptions.installing"
      (click)="activeNav(navOptions.installing)">Installing and Imports</a>
      <a href="#/time-to-interactive/" class="nav-section-title" 
      [class.active]="navSelected === navOptions.tti"
      (click)="activeNav(navOptions.tti)">Time to Interactive</a>
      <a href="#/annotate-metrics/" class="nav-section-title" 
      [class.active]="navSelected === navOptions.annotate"
      (click)="activeNav(navOptions.annotate)">Annotate metrics</a>
      <a href="#/component-first-paint/" class="nav-section-title" 
      [class.active]="navSelected === navOptions.cfp"
      (click)="activeNav(navOptions.cfp)">Component First Paint</a>
      <a href="#/custom-logging/" class="nav-section-title" 
      [class.active]="navSelected === navOptions.log"
      (click)="activeNav(navOptions.log)">Custom Logging</a>
      <a href="#/google-analytics/" class="nav-section-title" 
      [class.active]="navSelected === navOptions.ga"
      (click)="activeNav(navOptions.ga)">Google Analytics</a>
      <a href="#/copyright-and-licenses/" class="nav-section-title" 
      [class.active]="navSelected === navOptions.copyright"
      (click)="activeNav(navOptions.copyright)">Copyright and licenses</a>
    </div> 
  </div>
</div>
