<div class="layout layout--intro">
  <div class="layout-content">
    <div class="box box--intro" id="/home/">
      <a href="https://github.com/zizzamia/perfume.js" target="_blank">
        <picture class="logo">
          <source src="{{ path }}assets/perfume-logo-v0-7-0.webp" type="image/webp" />
          <source src="{{ path }}assets/perfume-logo-v0-7-0.png" type="image/jpeg" />
          <img src="{{ path }}assets/perfume-logo-v0-7-0.png" alt="Perfume.js logo" />
        </picture>
      </a>
      <h1 class="title">Perfume.js</h1>
      <p>A JavaScript library for <b>measuring</b> Short and Long Script, <br />
        <b>First (Contentful) Paint</b> (<a href="https://medium.com/@zizzamia/first-contentful-paint-with-a-touch-of-perfume-js-cd11dfd2e18f"
          target="_blank">FP/FCP</a>),
        <b>Time to Interactive</b> (<a href="https://medium.com/@zizzamia/time-to-interactive-with-rum-862ba874392c" target="_blank">TTI</a>),
        <b>Component First Paint</b> (CFM), annotating them to the DevTools timeline and reporting the results to
        <b>Google Analytics</b>.
      </p>
      <a class="github-button" href="https://github.com/zizzamia/perfume.js"
      data-size="large" data-show-count="true"
      aria-label="Star zizzamia/perfume.js on GitHub">Star</a>
      <a href="https://twitter.com/zizzamia?ref_src=twsrc%5Etfw"
      class="twitter-follow-button" data-size="large"
      data-show-count="true">Follow @zizzamia</a>
    </div>
  </div>
</div>
<div class="layout layout--body">
  <div class="layout-content">
    <div class="box box--intro">
      <h2 class="box-title" id="/user-centric-metrics/">
        User-centric performance metrics
      </h2>
      <p><b>Perfume</b> leverage the latest W3C Performance Drafts (like PerformanceObserver), for measuring performance that matters! ‚ö°Ô∏è </p>
      <ul>
        <li>First Paint (FP)</li>
        <li>First Contentful Paint (FCP)</li>
        <li>Time to Interactive (TTI)</li>
        <li>Component First Paint (CFP)</li>
      </ul>
      <picture class="box-img">
        <source src="{{ path }}assets/perf-metrics-load-timeline.webp" type="image/webp" />
        <source src="{{ path }}assets/perf-metrics-load-timeline.png" type="image/jpeg" />
        <img src="{{ path }}assets/perf-metrics-load-timeline.png" alt="Performance Timeline" />
      </picture>
    </div>

    <div class="box">
      <h2 class="box-title" id="/installing-and-imports/">Installing and Imports</h2>
      <div class="box-code js">
        <table>
          <tbody>
            <tr>
              <td class="code">
                <pre><span class="gray">// Install</span>
npm install perfume.js --save-dev

<span class="gray">// Importing library</span>
<span class="gray">// Import the generated bundle to use the whole library generated by this starter:</span>
<span class="red">import</span> Perfume <span class="red">from</span> 'perfume.js';

<span class="gray">// Import the transpiled modules from `dist/es` in case you have a modular library:</span>
<span class="red">import</span> Perfume <span class="red">from</span> 'node_modules/perfume.js/dist/es/perfume';

<span class="gray">// Universal Module Definition:</span>
<span class="red">import</span> Perfume <span class="red">from</span> 'node_modules/perfume.js/perfume.umd.js'; </pre>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <div class="box">
      <h2 class="box-title" id="first-contentful-paint">First Paint (<a href="https://medium.com/@zizzamia/first-contentful-paint-with-a-touch-of-perfume-js-cd11dfd2e18f" target="_blank">FP</a>)</h2>
      <p>FP is the exact time the browser renders anything as visually different from what was
      on the screen before navigation, e.g. a background change after a long blank white screen time.</p>
      <p class="box-demo">
        ‚ö°Ô∏è Perfume.js: First Contentful Paint {{ perfume.firstPaintDuration.toFixed(2) }} ms
      </p>
      <div class="box-code js">
        <table>
          <tbody>
            <tr>
              <td class="code">
                <pre><span class="red">const</span> <span class="blue">perfume</span> <span class="red">= new</span> <span class="violet">Perfume</span>({{'{'}}
  firstPaint<span class="red">:</span> <span class="blue">true</span>
{{'}'}});
<span class="gray">// ‚ö°Ô∏è Perfume.js: First Paint 1482.00 ms</span></pre>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <div class="box">
      <h2 class="box-title" id="first-contentful-paint">First Contentful Paint (<a href="https://medium.com/@zizzamia/first-contentful-paint-with-a-touch-of-perfume-js-cd11dfd2e18f" target="_blank">FCP</a>)</h2>
      <p>FCP is the exact time the browser renders the first bit of content from the DOM, which can be anything from an important image, text, or even the small SVG at the bottom of the page.</p>
      <p class="box-demo">
        ‚ö°Ô∏è Perfume.js: First Contentful Paint {{ perfume.firstContentfulPaintDuration.toFixed(2) }} ms
      </p>
      <div class="box-code js">
        <table>
          <tbody>
            <tr>
              <td class="code">
                <pre><span class="red">const</span> <span class="blue">perfume</span> <span class="red">= new</span> <span class="violet">Perfume</span>({{'{'}}
  firstContentfulPaint<span class="red">:</span> <span class="blue">true</span>
{{'}'}});
<span class="gray">// ‚ö°Ô∏è Perfume.js: First Contentful Paint 2029.00 ms</span></pre>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <div class="box">
      <h2 class="box-title" id="/time-to-interactive/">Time to Interactive (<a href="https://medium.com/@zizzamia/time-to-interactive-with-rum-862ba874392c" target="_blank">TTI</a>)</h2>
      <p>The metric marks the point at which your application is both visually rendered and capable of reliably responding to
        user input. An application could be unable to respond to user input for a couple of reasons:</p>
      <ul>
        <li>The JavaScript needed to make the components on the page work hasn't yet loaded;</li>
        <li>There are long tasks blocking the main thread.</li>
      </ul>
      <p>The
        <b>TTI</b> metric identifies the point at which the page's initial JavaScript is loaded and the main thread is idle
        (free of long tasks).</p>
      <p class="box-demo">
        ‚ö°Ô∏è Perfume.js: Time to interactive {{ (perfume.observeTimeToInteractive() | async)?.toFixed(2) || 0 }} ms
      </p>
      <div class="box-code js">
        <table>
          <tbody>
            <tr>
              <td class="code">
                <pre><span class="red">const</span> <span class="blue">perfume</span> <span class="red">= new</span> <span class="violet">Perfume</span>({{'{'}}
  timeToInteractive<span class="red">:</span> <span class="blue">true</span>
{{'}'}});
<span class="gray">// ‚ö°Ô∏è Perfume.js: Time to interactive 2452.07 ms</span></pre>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <div class="box">
      <h2 class="box-title" id="/annotate-metrics/">Annotate metrics in the DevTools</h2>
      <p>
        <b>Performance.mark</b> (
        <a href="https://developer.mozilla.org/en-US/docs/Web/API/User_Timing_API" target="_blank">User Timing API</a>) is used to create an application-defined peformance entry in the browser's performance entry
        buffer.
      </p>
      <p class="box-demo">
        <button class="box-demo-btn" (click)="measureFibonacci()">Run Fibonacci</button>
        <span>{{ logFibonacci }}</span>
      </p>
      <div class="box-code js">
        <table>
          <tbody>
            <tr>
              <td class="code">
                <pre>perfume.<span class="blue">start</span>('fibonacci');
<span class="violet">fibonacci</span>(<span class="blue">400</span>);
perfume.<span class="violet">end</span>('fibonacci');
<span class="gray">// ‚ö°Ô∏è Perfume.js: fibonacci 0.14 ms</span></pre>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <picture class="box-img">
        <source src="{{ path }}assets/performance-mark.webp" type="image/webp" />
        <source src="{{ path }}assets/performance-mark.png" type="image/jpeg" />
        <img src="{{ path }}assets/performance-mark.png" alt="Annotate metrics in the DevTools" />
      </picture>
    </div>

    <div class="box" id="/component-first-paint/">
      <h2 class="box-title">Component First Paint (CFP)</h2>
      <p>This metric mark the point, immediately after creating a
        <b>new component</b>, when the browser renders pixels to the screen.</p>
      <p class="box-demo">
        <button type="button" #p="ngbPopover" class="box-demo-btn"
        placement="top" ngbPopover triggers="manual"
        popoverTitle="And here's some amazing content."
        (click)="togglePopover()">Click to toggle popover</button>
        <span>{{ logTogglePopover }}</span>
      </p>
      <div class="box-code js">
        <table>
          <tbody>
            <tr>
              <td class="code">
                <pre>perfume.<span class="blue">start</span>('togglePopover');
<span class="violet">$</span>(element).<span class="violet">popover</span>('toggle');
perfume.<span class="violet">endPaint</span>('togglePopover');
<span class="gray">// ‚ö°Ô∏è Perfume.js: togglePopover 10.54 ms</span></pre>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <picture class="box-img">
        <source src="{{ path }}assets/performance-cfp.webp" type="image/webp" />
        <source src="{{ path }}assets/performance-cfp.png" type="image/jpeg" />
        <img src="{{ path }}assets/performance-cfp.png" alt="Annotate Component First Paint (CFP)" />
      </picture>
    </div>

    <div class="box">
      <h2 class="box-title" id="/custom-logging/">Custom Logging</h2>
      <p>Save the duration and print it out exactly the way you want it.</p>
      <p class="box-demo">
        <button class="box-demo-btn" (click)="customLogging()">Run custom logging</button>
        <span>{{ logCustom }}</span>
      </p>
      <div class="box-code js">
        <table>
          <tbody>
            <tr>
              <td class="code">
                <pre><span class="red">const</span> <span class="blue">perfume</span> <span class="red">= new</span> <span class="violet">Perfume</span>({{'{'}}
  logPrefix<span class="red">:</span> "üçπ HayesValley.js"
{{'}'}});

perfume.<span class="blue">start</span>('fibonacci');
<span class="violet">fibonacci</span>(<span class="blue">400</span>);
<span class="red">const</span> duration <span class="red">=</span> perfume.<span class="violet">end</span>('fibonacci');
perfume.<span class="violet">log</span>('Custom logging', duration);
<span class="gray">// üçπ HayesValley.js: Custom logging 0.14 ms</span></pre>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <div class="box">
      <h2 class="box-title" id="/google-analytics/">Google Analytics</h2>
      <p>To enable Perfume to send your measures to Google Analytics User timing, set the option
        <b>enable:true</b> and a custom
        <a href="https://developers.google.com/analytics/devguides/collection/analyticsjs/field-reference#timingVar" target="_blank">user timing variable</a>
        <b>timingVar:"name"</b>.</p>
      <div class="box-code js">
        <table>
          <tbody>
            <tr>
              <td class="code">
                <pre><span class="red">const</span> <span class="blue">perfume</span> <span class="red">= new</span> <span class="violet">Perfume</span>({{'{'}}
  googleAnalytics<span class="red">:</span> {{'{'}}
    enable<span class="red">:</span> <span class="blue">true</span>,
    timingVar<span class="red">:</span> "userId"
  {{'}'}}
{{'}'}});</pre>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <picture class="box-img">
        <source src="{{ path }}assets/performance-analytics.webp" type="image/webp" />
        <source src="{{ path }}assets/performance-analytics.png" type="image/jpeg" />
        <img src="{{ path }}assets/performance-analytics.png" alt="Google Analytics User timing" />
      </picture>
    </div>

    <div class="box">
      <h2 class="box-title" id="/default-options/">Default Options</h2>
      <p>Default options provided to Perfume.js constructor.</p>
      <div class="box-code js">
        <table>
          <tbody>
            <tr>
              <td class="code">
                <pre><span class="red">const</span> <span class="blue">options</span> <span class="red">=</span> {{'{'}}
  firstPaint<span class="red">:</span> <span class="blue">false</span>
  firstContentfulPaint<span class="red">:</span> <span class="blue">false</span>,
  timeToInteractive<span class="red">:</span> <span class="blue">false</span>,
  googleAnalytics<span class="red">:</span> {{'{'}}
    enable<span class="red">:</span> <span class="blue">false</span>,
    timingVar<span class="red">:</span> "name"
  {{'}'}},
  logging<span class="red">:</span> <span class="blue">true</span>,
  logPrefix<span class="red">:</span> "‚ö°Ô∏è Perfume.js:"
{{'}'}};</pre>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <div class="box">
      <h2 class="box-title" id="/utilities/">Utilities</h2>
      <p>Perfume.js expose some methods and properties which may be useful to people extending the library.</p>
      <div class="box-code js">
        <table>
          <tbody>
            <tr>
              <td class="code">
                <pre><span class="gray">// First Paint value</span>
perfume.firstPaintDuration;

<span class="gray">// First Contentful Paint value</span>
perfume.firstContentfulPaintDuration;

<span class="gray">// Time To Interactive value (Async)</span>
perfume.<span class="blue">observeTimeToInteractive</span>();</pre>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <div class="box">
      <h2 class="box-title" id="/copyright-and-license/">Copyright and license</h2>
      <p>Code and documentation copyright 2018
        <a href="https://twitter.com/Zizzamia" target="_blank">Leonardo Zizzamia</a>. Code released under the
        <a href="https://github.com/Zizzamia/perfume.js/blob/master/LICENSE" target="_blank">MIT license</a>. Docs released under Creative Commons.</p>
    </div>

    <div class="box Fibonacci"></div>
  </div>
  <div class="layout-nav">
    <div class="layout-nav-links">
      <a href="{{ path }}#/home/"
      [class.active]="navSelected === navOptions.home"
      (click)="activeNav(navOptions.home)">Home</a>
      <a href="{{ path }}#/user-centric-metrics/"
      [class.active]="navSelected === navOptions.userCentric"
      (click)="activeNav(navOptions.userCentric)">User-centric metrics</a>
      <a href="{{ path }}#/installing-and-imports/"
      [class.active]="navSelected === navOptions.installing"
      (click)="activeNav(navOptions.installing)">Installing and Imports</a>
      <a href="{{ path }}#/time-to-interactive/"
      [class.active]="navSelected === navOptions.tti"
      (click)="activeNav(navOptions.tti)">Time to Interactive</a>
      <a href="{{ path }}#/annotate-metrics/"
      [class.active]="navSelected === navOptions.annotate"
      (click)="activeNav(navOptions.annotate)">Annotate metrics</a>
      <a href="{{ path }}#/component-first-paint/"
      [class.active]="navSelected === navOptions.cfp"
      (click)="activeNav(navOptions.cfp)">Component First Paint</a>
      <a href="{{ path }}#/custom-logging/"
      [class.active]="navSelected === navOptions.log"
      (click)="activeNav(navOptions.log)">Custom Logging</a>
      <a href="{{ path }}#/google-analytics/"
      [class.active]="navSelected === navOptions.ga"
      (click)="activeNav(navOptions.ga)">Google Analytics</a>
      <a href="{{ path }}#/default-options/"
      [class.active]="navSelected === navOptions.options"
      (click)="activeNav(navOptions.options)">Default Options</a>
      <a href="{{ path }}#/default-options/"
      [class.active]="navSelected === navOptions.utilities"
      (click)="activeNav(navOptions.utilities)">Utilities</a>
      <a href="{{ path }}#/copyright-and-license/"
      [class.active]="navSelected === navOptions.copyright"
      (click)="activeNav(navOptions.copyright)">Copyright and licenses</a>
    </div>
  </div>
</div>
